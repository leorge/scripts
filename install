if [ -d .git ] && [ -x esd.awk ]; then   # in the repository
    git pull
    mkdir -p ~/bin
    for cmd in *; do
        if [ $cmd = "README.md" ]; then
            continue
        elif [ $cmd = `basename $0` ]; then
            continue
        else
            ln -f $cmd ~/bin/
        fi
    done
    exit
elif [ ! -d scripts ]; then  # make a repository here.
    INSTALLER=inst_cmd
    if ! which $INSTALLER > /dev/null; then  # install a installer temporary
        TMP=/tmp
        wget -N -P $TMP https://github.com/leorge/scripts/raw/master/$INSTALLER
        chmod +x $TMP/$INSTALLER
	PATH=$PATH:$TMP
    fi
    $INSTALLER git gawk perl
    git clone https://github.com/leorge/scripts.git
fi
pushd scripts && bash `basename $0`; popd
rm $0
